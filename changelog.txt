# POK-Manager Changelog

## Version 2.1.53 (Latest)
### Improvements
- Added command persistence when upgrading the POK-Manager script
- Automatically saves and reuses commands when restarting after an update
- Prevents the need to retype long server chat messages after an upgrade
- Improved user experience by preserving command history across restarts
- Added rollback support for saved commands to ensure they're never lost

## Version 2.1.52 (Previous)
### Bug Fixes
- Fixed issue with the `-update` command failing to find containers with "asa_" prefix
- Improved container name handling to support both prefixed and non-prefixed container names
- Removed duplicate code in update function that could cause errors
- Enhanced update process to correctly identify running containers regardless of naming convention

## Version 2.1.51 (Previous)
### Major Improvements
- Added disk space management to prevent containers from consuming excessive storage
- Automatic log rotation to limit storage consumption
- Cleanup of temporary files during container lifecycle events (start, stop, restart)
- Removed unnecessary data persistence between container restarts
- Fixed issue where restarting containers could use up all available space

## Version 2.1.50 (Previous)
### Major Changes
- Switched to new user ID system (UID 7777) for better permission handling
- Added AsaApi (ARK Server API) integration for plugin support
- Improved Docker image: `acekorneya/asa_server:2_1_latest` (replaces `2_0_latest`)
- Enhanced backup and restore functionality with rotation policies
- Added migration tools for upgrading from 2.0 to 2.1

### New Commands
- `-API <TRUE|FALSE> <instance_name|-all>`: Enable/disable ARK Server API
- `-beta`: Switch to beta Docker images for testing new features
- `-stable`: Switch back to stable Docker images
- `-migrate`: Migrate from 2.0 to 2.1 with permission adjustments
- `-changelog`: Display this change history
- `-api-recovery`: Recover API instances with container restart

### File System & Permissions
- Changed default UID/GID from 1000:1000 to 7777:7777
- Added migration system to handle permissions when upgrading
- Improved file ownership checks and automatic corrections
- Enhanced permission handling for cluster directories

### Backup System Improvements
- Added automated backup rotation based on count and size limits
- Configurable backup policies per instance
- Improved backup operations with better error handling
- Enhanced restoration process with clearer user guidance

### Server Management
- Enhanced server shutdown and restart processes
- Added support for AsaApi plugins and mods
- Improved server initialization and startup
- Better handling of server crashes and recovery
- Added option for random startup delays to prevent update conflicts

### User Interface
- Added colorful ASCII logo and improved visual formatting
- Enhanced status messages and error reporting
- Better progress indicators for long-running operations
- More detailed server status information

### Docker Improvements
- Added support for both 2.0 and 2.1 Docker images
- Improved container environment setup
- Enhanced Wine/Proton configuration for better performance
- Added container health checks and recovery mechanisms

### Documentation
- Added extensive in-script documentation
- Improved error messages with troubleshooting guidance
- Added version information display

## Version 2.0 (Previous)
- Initial stable release of POK-Manager
- Basic Docker containerization
- Server management commands
- Permission handling with UID/GID 1000:1000
- Simple backup functionality
- Basic server startup and shutdown

Note: To update from version 2.0 to 2.1, run: `./POK-manager.sh -migrate`
This will adjust file permissions and update Docker images to ensure compatibility. 